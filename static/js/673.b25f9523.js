"use strict";(self["webpackChunkfront_vue"]=self["webpackChunkfront_vue"]||[]).push([[673],{673:function(t,e,i){i.r(e),i.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-main",attrs:{id:"homeId"}},[e("div",{staticClass:"row cams_content_row"},[e("div",{staticStyle:{flex:"1"}},[e("div",{staticClass:"cams_content_row_left",attrs:{id:"hik_iframe"}},[e("iframe",{ref:"EZUIKitPlayer-video-container",staticClass:"cams_content_row_left_video",attrs:{id:"EZUIKitPlayer-video-container",src:t.open_url,allowfullscreen:"true",allow:"autoplay",frameborder:"0"}})])]),e("div",{staticStyle:{width:"300px"}},[e("div",{staticClass:"row cams_content_row_right",staticStyle:{"margin-bottom":"0px"}},[e("div",{staticClass:"cams_content_row_right_1 default_div"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.deviceSerial,expression:"deviceSerial"}],staticClass:"form-control",staticStyle:{display:"none"},attrs:{type:"text",id:"deviceSerial"},domProps:{value:t.deviceSerial},on:{input:function(e){e.target.composing||(t.deviceSerial=e.target.value)}}}),e("div",{staticClass:"nav nav-tabs party-nav-tab",staticStyle:{padding:"10px"},attrs:{id:"myTab"}},[e("p",{staticClass:"active",attrs:{id:"tabItem1"}},[t._v("视频监控")]),e("div",{staticClass:"row cam_list",staticStyle:{"overflow-x":"hidden"}},t._l(t.list,(function(i,n){return e("div",{staticClass:"camslistbox"},[e("div",{staticStyle:{cursor:"pointer",height:"auto"},attrs:{name:"all_button",id:"choose_"+i.id},on:{click:function(e){return t.queryCamList("1",n)}}},[e("img",{staticClass:"cams_cover",staticStyle:{height:"80px"},attrs:{src:"https://statics.ys7.com/device/assets/imgs/public/homeDevice.jpeg",alt:""}}),1==i.status?e("div",{staticClass:"cams_online"}):e("div",{staticClass:"cams_offline"}),e("h5",{staticStyle:{width:"100%",overflow:"hidden",color:"#fff",padding:"0",height:"20px"}},[t._v(" "+t._s(i.ayName))])])])})),0)])]),t._l(3,(function(t){return e("i",{key:t,staticClass:"namei"})})),e("div",{staticClass:"row cams_content_row_right_2",class:{active:t.isActive,error:!t.isActive},attrs:{id:"camsDirectionPanel"},on:{mouseup:function(e){return t.Device_PTZ(100)},click:function(e){return t.Device_PTZ(100)}}},[e("div",{staticClass:"container default_div",staticStyle:{width:"100%",height:"100%"}},[e("div",{staticClass:"row",staticStyle:{width:"100%",height:"33.33%"}},[e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_1",on:{mousedown:function(e){return t.Device_PTZ(4)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_2",on:{mousedown:function(e){return t.Device_PTZ(0)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_3",on:{mousedown:function(e){return t.Device_PTZ(6)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_add cams_content_row_right_2_arrow",on:{mousedown:function(e){return t.Device_PTZ(10)},mouseup:function(e){return t.Device_PTZ(100)}}}),t._m(0),e("div",{staticClass:"cams_content_row_right_2_minu cams_content_row_right_2_arrow",on:{mousedown:function(e){return t.Device_PTZ(11)},mouseup:function(e){return t.Device_PTZ(100)}}})]),e("div",{staticClass:"row",staticStyle:{width:"100%",height:"33.33%"}},[e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_4",on:{mousedown:function(e){return t.Device_PTZ(2)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_text",on:{mousedown:function(e){return t.Device_PTZ(100)}}},[e("h5",[t._v("停止")])]),e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_5",on:{mousedown:function(e){return t.Device_PTZ(3)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_add",on:{mousedown:function(e){return t.Device_PTZ(8)}}}),t._m(1),e("div",{staticClass:"cams_content_row_right_2_minu",on:{mousedown:function(e){return t.Device_PTZ(9)}}})]),e("div",{staticClass:"row",staticStyle:{width:"100%",height:"33.33%"}},[e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_6",on:{mousedown:function(e){return t.Device_PTZ(4)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_7",on:{mousedown:function(e){return t.Device_PTZ(1)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_arrow cams_content_row_right_2_8",on:{mousedown:function(e){return t.Device_PTZ(7)},mouseup:function(e){return t.Device_PTZ(100)}}}),e("div",{staticClass:"cams_content_row_right_2_list"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.device_index,expression:"device_index"}],staticClass:"form-control",attrs:{id:"device_index"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.device_index=e.target.multiple?i:i[0]}}},[e("option",{attrs:{value:"1"}},[t._v("1")]),e("option",{attrs:{value:"2"}},[t._v("2")]),e("option",{attrs:{value:"3"}},[t._v("3")]),e("option",{attrs:{value:"4"}},[t._v("4")]),e("option",{attrs:{value:"5"}},[t._v("5")]),e("option",{attrs:{value:"6"}},[t._v("6")]),e("option",{attrs:{value:"7"}},[t._v("7")]),e("option",{attrs:{value:"8"}},[t._v("8")]),e("option",{attrs:{value:"9"}},[t._v("9")]),e("option",{attrs:{value:"10"}},[t._v("10")]),e("option",{attrs:{value:"11"}},[t._v("11")]),e("option",{attrs:{value:"12"}},[t._v("12")]),e("option",{attrs:{value:"13"}},[t._v("13")]),e("option",{attrs:{value:"14"}},[t._v("14")]),e("option",{attrs:{value:"15"}},[t._v("15")]),e("option",{attrs:{value:"16"}},[t._v("16")]),e("option",{attrs:{value:"17"}},[t._v("17")]),e("option",{attrs:{value:"18"}},[t._v("18")]),e("option",{attrs:{value:"19"}},[t._v("19")]),e("option",{attrs:{value:"20"}},[t._v("20")])])]),e("div",{staticClass:"cams_content_row_right_2_text",on:{click:function(e){return t.device_preset()}}},[e("h5",[t._v("预置点")])])])])])],2)])])])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"cams_content_row_right_2_text"},[e("h5",[t._v("变焦")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"cams_content_row_right_2_text"},[e("h5",[t._v("变倍")])])}],a=i(9081),r=(i(4720),{name:"",data(){return{isActive:!0,device_index:null,deviceSerial:"",open_url:"",accessToken:"",actionCarmarId:null,CNO:"",factoryType:"",timer:null,list:[]}},mounted(){this.$nextTick((()=>{this.queryCamList("1",0)}));var t,e,i=0,n=5;this.timer=window.setInterval((()=>{i++,i==60*n&&(document.getElementById("homeId").remove(),alert("长时间未操作页面，已为您停播，请重新加载"),location.reload())}),1e3),document.getElementById("homeId").onmousemove=function(n){var o=n.clientX,a=n.clientY;t==o&&e==a||(i=0),t=o,e=a},document.getElementById("homeId").onkeydown=function(){i=0}},beforeDestroy(){clearInterval(this.timer),this.timer=null},methods:{starVideotLoading(){var t=this;t.videoLoading=this.$loading({lock:!0,text:"拼命加载中...",spinner:"el-icon-loading",target:document.querySelector(".video_loading"),background:"rgba(0,0,0,.5)"})},endVideoLoading(){var t=this;t.videoLoading.close()},device_preset(){let t={index:this.device_index,deviceSerial:this.actionCarmarId};(0,a.cR)(JSON.stringify(t)).then((t=>{t.success;"1"!=LoginMessages&&this.$message.error(t.Return_Message)}))},show(){this.isActive=!1;let t=document.getElementById("EZUIKitPlayer-video-container");t.contentWindow.postMessage("closeSound",this.open_url)},queryCamList(t,e){this.starVideotLoading(),(0,a.E2)(t).then((i=>{i.items?(this.list=i.items,this.factoryType=i.items[e].factoryType,this.actionCarmarId=i.items[e].aySerNo,"1"==t&&i.total>0&&((0,a.Zf)({id:i.items[e].aySerNo,cameraType:i.items[e].factoryType,cno:i.items[e].cno}).then((t=>{if(this.CNO=i.items[e].cno,this.endVideoLoading(),200!=t.code)this.$message.error(t.data.detail);else{let o=t.data.openUrl;if(o){var n=o.split("/");n[n.length-1]=i.items[e].cno+".hd.live",this.open_url=n.join("/")}document.getElementById("hik_iframe").innerHTML='<iframe src="https://open.ys7.com/ezopen/h5/iframe_se?url='+this.open_url+"&autoplay=1&templete=0&id=video-container&accessToken="+t.data.accessToken+'"  id="EZUIKitPlayer-video-container" allowfullscreen="true" allow="autoplay" frameborder="0" class="cams_content_row_left_video"></iframe>',this.accessToken=t.data.accessToken}})),this.isonline())):(this.endVideoLoading(),this.$message.warning("无监控"))}))},isonline(){for(let t=0;t<this.list.length;t++)(0,a.bm)({cameraType:this.list[t].factoryType,cno:this.list[t].cno,driver:this.list[t].aySerNo}).then((e=>{this.list[t].status=e.data.status}))},Device_PTZ(t){(0,a.AS)({id:this.actionCarmarId,direction:t,cno:this.CNO,cameraType:this.factoryType}).then((t=>{200!==t.code&&console.log(t.data.detail)}))}}}),s=r,c=i(3736),_=(0,c.Z)(s,n,o,!1,null,"341f607e",null),u=_.exports},9081:function(t,e,i){i.d(e,{AS:function(){return s},E2:function(){return o},XJ:function(){return c},Zf:function(){return a},bm:function(){return _},cR:function(){return r}});var n=i(4471);function o(t){return(0,n.Z)({url:"front/v1/camera/list/1",method:"get"})}function a(t){return(0,n.Z)({url:"front/v1/camera/getCamera/"+t.id,method:"get",params:{cameraType:t.cameraType,cno:t.cno}})}function r(t){return(0,n.Z)({url:"/device_preset/",method:"post",data:JSON.parse(t)})}function s(t){return(0,n.Z)({url:"front/v1/camera/ptz/"+t.id+"/"+t.direction,method:"get",params:{cno:t.cno,cameraType:t.cameraType}})}function c(t){return(0,n.Z)({url:"front/v1/videoList",method:"get"})}function _(t){return(0,n.Z)({url:"/front/v1/camera/status",method:"get",params:t})}}}]);
//# sourceMappingURL=673.b25f9523.js.map