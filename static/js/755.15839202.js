"use strict";(self["webpackChunkfront_vue"]=self["webpackChunkfront_vue"]||[]).push([[755],{7490:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bridge"},[t("Titlel",{scopedSlots:e._u([{key:"nametext",fn:function(){return[t("span",[e._v("农名工管理")])]},proxy:!0},{key:"contont",fn:function(){return[t("div",[t("div",{staticClass:"control"},[t("el-button",{attrs:{type:"primary"},on:{click:e.backgo}},[e._v("上一级")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$store.state.uplodezip=!0}}},[e._v("导入")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$store.state.uploadheader=!0}}},[e._v("头像导入")]),t("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.addwid()}}},[e._v("新增")]),t("div",{staticClass:"elserch"},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.serdata,callback:function(t){e.serdata=t},expression:"serdata"}},[t("el-select",{attrs:{slot:"prepend",placeholder:"全部"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[t("el-option",{attrs:{label:"全部",value:140101}})],1),t("el-button",{attrs:{slot:"append"},on:{click:e.serchdata},slot:"append"},[e._v("搜索")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","header-cell-style":{background:"linear-gradient(180deg,rgba(10, 74, 216, 0.70) 30%,rgba(5, 49, 146, 0.30))",color:"#00CFFF !important",border:"none"}}},[t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",[t("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.changerow(r.row)}}}),t("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.deletrow(r.row)}}})])]}}])}),t("el-table-column",{attrs:{type:"index",label:"序号"}}),t("el-table-column",{attrs:{label:"个人照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{attrs:{src:e.row.avatarUrl}})]}}])}),t("el-table-column",{attrs:{prop:"workerName",label:"姓名"}}),t("el-table-column",{attrs:{width:"180",prop:"deptName",label:"劳务队伍"}}),t("el-table-column",{attrs:{prop:"gender",label:"性别"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄"}}),t("el-table-column",{attrs:{width:"250",prop:"home",label:"家庭住址"}}),t("el-table-column",{attrs:{width:"150",prop:"idNum",label:"身份证"}}),t("el-table-column",{attrs:{width:"100",prop:"telephone",label:"联系电话"}}),t("el-table-column",{attrs:{width:"130",prop:"entryDate",label:"进场时间",formatter:e.getrdate}}),t("el-table-column",{attrs:{prop:"typeOfWork",label:"工种"}}),t("el-table-column",{attrs:{width:"130",prop:"outDate",label:"退场时间",formatter:e.getrdate}})],1),t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.PageSize,layout:"prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)]},proxy:!0}])}),t("Uplodezip"),t("el-dialog",{attrs:{title:"新增工人数据",visible:e.wokerdilog,width:"50%"},on:{"update:visible":function(t){e.wokerdilog=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"workerName"}},[t("el-input",{model:{value:e.ruleForm.workerName,callback:function(t){e.$set(e.ruleForm,"workerName",t)},expression:"ruleForm.workerName"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-input",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}})],1),t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input",{model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",t)},expression:"ruleForm.age"}})],1),t("el-form-item",{attrs:{label:"家庭住址",prop:"home"}},[t("el-input",{model:{value:e.ruleForm.home,callback:function(t){e.$set(e.ruleForm,"home",t)},expression:"ruleForm.home"}})],1),t("el-form-item",{attrs:{label:"身份证",prop:"idNum"}},[t("el-input",{model:{value:e.ruleForm.idNum,callback:function(t){e.$set(e.ruleForm,"idNum",t)},expression:"ruleForm.idNum"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[t("el-input",{model:{value:e.ruleForm.telephone,callback:function(t){e.$set(e.ruleForm,"telephone",t)},expression:"ruleForm.telephone"}})],1),t("el-form-item",{attrs:{label:"进场时间",prop:"entryDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.ruleForm.entryDate,callback:function(t){e.$set(e.ruleForm,"entryDate",t)},expression:"ruleForm.entryDate"}})],1),t("el-form-item",{attrs:{label:"工种",prop:"typeOfWork"}},[t("el-input",{model:{value:e.ruleForm.typeOfWork,callback:function(t){e.$set(e.ruleForm,"typeOfWork",t)},expression:"ruleForm.typeOfWork"}})],1),t("el-form-item",{attrs:{label:"退场时间",prop:"outDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.ruleForm.outDate,callback:function(t){e.$set(e.ruleForm,"outDate",t)},expression:"ruleForm.outDate"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.wokerdilog=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("ruleForm")}}},[e._v("提 交")])],1)],1),t("el-dialog",{attrs:{title:"修改工人数据",visible:e.wokerdilogchange,width:"50%"},on:{"update:visible":function(t){e.wokerdilogchange=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"workerName"}},[t("el-input",{model:{value:e.ruleForm.workerName,callback:function(t){e.$set(e.ruleForm,"workerName",t)},expression:"ruleForm.workerName"}})],1),t("el-form-item",{attrs:{label:"劳动队伍",prop:"deptId"}},[t("el-select",{staticStyle:{left:"0"},attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.deptId,callback:function(t){e.$set(e.ruleForm,"deptId",t)},expression:"ruleForm.deptId"}},e._l(e.option,(function(e,r){return t("el-option",{attrs:{label:e.deptName,value:Number(e.deptId)}})})),1)],1),t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-input",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}})],1),t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input",{model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",t)},expression:"ruleForm.age"}})],1),t("el-form-item",{attrs:{label:"家庭住址",prop:"home"}},[t("el-input",{model:{value:e.ruleForm.home,callback:function(t){e.$set(e.ruleForm,"home",t)},expression:"ruleForm.home"}})],1),t("el-form-item",{attrs:{label:"身份证",prop:"idNum"}},[t("el-input",{model:{value:e.ruleForm.idNum,callback:function(t){e.$set(e.ruleForm,"idNum",t)},expression:"ruleForm.idNum"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[t("el-input",{model:{value:e.ruleForm.telephone,callback:function(t){e.$set(e.ruleForm,"telephone",t)},expression:"ruleForm.telephone"}})],1),t("el-form-item",{attrs:{label:"进场时间",prop:"entryDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.ruleForm.entryDate,callback:function(t){e.$set(e.ruleForm,"entryDate",t)},expression:"ruleForm.entryDate"}})],1),t("el-form-item",{attrs:{label:"工种",prop:"typeOfWork"}},[t("el-input",{model:{value:e.ruleForm.typeOfWork,callback:function(t){e.$set(e.ruleForm,"typeOfWork",t)},expression:"ruleForm.typeOfWork"}})],1),t("el-form-item",{attrs:{label:"退场时间",prop:"outDate"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.ruleForm.outDate,callback:function(t){e.$set(e.ruleForm,"outDate",t)},expression:"ruleForm.outDate"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.wokerdilogchange=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changerowsub("ruleForm")}}},[e._v("提 交")])],1)],1)],1)},o=[],a=(r(7658),r(549)),s=r(9694),i=r(298),n=(r(4720),{inject:["reload"],components:{Titlel:a["default"],Uplodezip:s.Z},data(){return{parentid:"",serdata:"",select:"",tableData:[],currentPage:1,totalCount:1,pageSizes:[1,2,3,4],PageSize:20,wokerdilog:!1,wokerdilogchange:!1,ruleForm:{age:null,deptId:"",entryDate:0,gender:"",home:"",idNum:"",outDate:0,telephone:"",typeOfWork:"",workerName:""},rules:{age:[{required:!0,message:"请输入",trigger:"blur"}],entryDate:[{required:!0,message:"请输入",trigger:"blur"}],gender:[{required:!0,message:"请输入",trigger:"blur"}],home:[{required:!0,message:"请输入",trigger:"blur"}],idNum:[{required:!0,message:"请输入",trigger:"blur"}],telephone:[{required:!0,message:"请输入",trigger:"blur"}],typeOfWork:[{required:!0,message:"请输入",trigger:"blur"}],workerName:[{required:!0,message:"请输入",trigger:"blur"}]},option:[]}},mounted(){this.parentid=this.$route.query.parentid,this.ruleForm.deptId=this.$route.query.parentid,(0,i.Zo)({limit:20,offset:0,deptId:this.parentid,workerName:""}).then((e=>{this.tableData=e.data.items,this.totalCount=e.data.total})).catch((()=>{this.$message.error("请求错误")})),(0,i.x$)(this.$route.query.grandeid).then((e=>{this.option=e.data.items}))},methods:{getrdate(e,t,r,l){if(null==r)return"-";var o=new Date(r),a=o.getFullYear(),s=o.getMonth()+1,i=o.getDate();return a+"-"+s+"-"+i},serchdata(){(0,i.Zo)({limit:20,offset:0,deptId:this.parentid,workerName:this.serdata}).then((e=>{this.tableData=e.data.items,this.totalCount=e.data.total})).catch((()=>{this.$message.error("请求错误")}))},handleCurrentChange(e){(0,i.Zo)({limit:20,offset:20*(e-1),deptId:this.parentid,workerName:""}).then((e=>{this.tableData=e.data.items,this.totalCount=e.data.total})).catch((()=>{this.$message.error("请求错误")})),this.currentPage=e},submit(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;(0,i._i)(this.ruleForm).then((e=>{200==e.code?(this.wokerdilog=!1,this.$message.success("添加成功"),this.reload()):this.$message.error(e.data.detail)})).catch((()=>{this.$message.error("失败")}))}))},changerow(e){this.ruleForm=e,this.wokerdilogchange=!0},changerowsub(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;(0,i.C$)(this.ruleForm).then((e=>{200==e.code?(this.wokerdilog=!1,this.$message.success("修改成功"),this.reload()):this.$message.error(e.data.detail)})).catch((()=>{this.$message.error("失败")}))}))},addwid(){this.ruleForm={age:null,deptId:this.$route.query.parentid,entryDate:0,gender:"",home:"",idNum:"",outDate:0,telephone:"",typeOfWork:"",workerName:""},this.wokerdilog=!0},deletrow(e){this.$confirm("是否确认删除"+e.workerName+"的数据记录","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,i.p4)(e.workerId).then((e=>{200==e.code&&(this.$message.success(e.data),this.reload())}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},backgo(){this.$router.push({path:"/synthesize/team/index",query:{isback:!0,grandeid:this.$route.query.grandeid,type:1}})}}}),u=n,m=r(3736),d=(0,m.Z)(u,l,o,!1,null,"952f3ce4",null),p=d.exports}}]);
//# sourceMappingURL=755.15839202.js.map